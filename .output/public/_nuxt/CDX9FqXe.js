import{N as S,r as v,j as q,X as T,v as n,y as e,A as k,B as N,z as r,H,U as d,J as m,C as u,R as c,Y as L,g as P,P as Z,Z as A,x as i,V as y,W as B}from"./DCjIt9qW.js";import{_ as D}from"./ConYotEh.js";import{_ as j}from"./7x8O6jVQ.js";import{u as z}from"./h4UTid-P.js";import{s as I}from"./x_rD_Ya3.js";const M={class:"grow"},E={class:"relative"},W={class:"relative max-w-6xl mx-auto px-4 sm:px-6"},O={class:"pt-32 pb-12 md:pt-40 md:pb-20"},R={class:"max-w-3xl mx-auto text-center pb-12"},F={class:"mb-5"},G={class:"h2 bg-clip-text text-transparent bg-linear-to-r from-slate-200/60 via-slate-200 to-slate-200/60"},J={class:"max-w-sm mx-auto"},X={class:"space-y-4"},Y={key:0,class:"text-rose-500 text-xs mt-1"},K={key:0,class:"text-rose-500 text-xs mt-1"},Q={key:0,class:"text-rose-500 text-xs mt-1"},ee={key:0,class:"text-rose-500 text-xs mt-1"},se={key:0},te={class:"flex space-x-2"},oe=["disabled"],ae={key:0},le={key:1},re={key:2},ne={key:0,class:"text-rose-500 text-xs mt-1"},ie={key:0,class:"text-rose-500 text-xs mt-1"},ue={key:0,class:"text-rose-500 text-xs mt-1"},de={class:"mt-6"},me=["disabled"],pe={key:0},ce={key:1},ve={class:"text-center mt-4"},be={class:"text-sm text-slate-400"},xe={class:"flex items-center my-6"},fe={class:"text-sm text-slate-500 italic"},he={class:"flex space-x-3"},ge={class:"btn text-slate-300 hover:text-white transition duration-150 ease-in-out w-full group [background:linear-gradient(var(--color-slate-900),var(--color-slate-900))_padding-box,conic-gradient(var(--color-slate-400),var(--color-slate-700)_25%,var(--color-slate-700)_75%,var(--color-slate-400)_100%)_border-box] relative before:absolute before:inset-0 before:bg-slate-800/30 before:rounded-full before:pointer-events-none h-9"},we={class:"relative"},_e={class:"sr-only"},ye={class:"btn text-slate-300 hover:text-white transition duration-150 ease-in-out w-full group [background:linear-gradient(var(--color-slate-900),var(--color-slate-900))_padding-box,conic-gradient(var(--color-slate-400),var(--color-slate-700)_25%,var(--color-slate-700)_75%,var(--color-slate-400)_100%)_border-box] relative before:absolute before:inset-0 before:bg-slate-800/30 before:rounded-full before:pointer-events-none h-9"},ke={class:"relative"},Ne={class:"sr-only"},Ce={name:"SignUp"},Le=Object.assign(Ce,{setup(Ve){const C=A();S();const{showToast:b}=z(),x=v(!1),f=v(!1),p=v(0),g=v(null),w=q(()=>/^1[3-9]\d{9}$/.test(t.value.phonenumber)),t=v({nickName:"",userName:"",email:"",phonenumber:"",password:"",sex:"",smsCode:""}),o=T({nickName:"",userName:"",email:"",phonenumber:"",password:"",sex:"",smsCode:""}),_=()=>t.value.phonenumber?w.value?(o.phonenumber="",!0):(o.phonenumber="请输入有效的手机号码",!1):(o.phonenumber="请输入手机号码",!1),V=async()=>{if(_())try{f.value=!0,await Z("/sms/enroll",{number:t.value.phonenumber}),b("验证码发送成功"),p.value=60,g.value=I(()=>{p.value--,p.value<=0&&(clearInterval(g.value),g.value=null)},1e3)}catch(a){console.error("发送短信验证码失败:",a),b(a.message||"发送验证码失败，请稍后重试")}finally{f.value=!1}},U=()=>{let a=!0;return Object.keys(o).forEach(s=>{o[s]=""}),t.value.nickName.length<2&&(o.nickName="昵称至少需要2个字符",a=!1),/^[a-zA-Z0-9]{5,}$/.test(t.value.userName)||(o.userName="用户名只能包含英文和数字，且至少5个字符",a=!1),/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{6,}$/.test(t.value.password)||(o.password="密码至少6个字符，且必须包含数字、大小写字母",a=!1),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.value.email)||(o.email="请输入有效的邮箱地址",a=!1),_()||(a=!1),t.value.phonenumber&&!t.value.smsCode&&(o.smsCode="请输入手机验证码",a=!1),t.value.sex||(o.sex="请选择性别",a=!1),a},$=async()=>{if(U())try{x.value=!0;const a=y(t.value.password),s=y(t.value.email),h=y(t.value.phonenumber),l=new FormData;l.append("nickName",t.value.nickName),l.append("userName",t.value.userName),l.append("email",s),l.append("phonenumber",h),l.append("password",a),l.append("sex",t.value.sex),l.append("SmsCode",t.value.smsCode);const Ue=await B("/user/enroll",l);b("注册成功"),C.push("/signin")}catch(a){console.error("注册失败:",a),b(a.message||"注册失败，请重试")}finally{x.value=!1}};return(a,s)=>{const h=P("router-link");return i(),n("main",M,[e("section",E,[s[21]||(s[21]=e("div",{class:"md:block absolute left-1/2 -translate-x-1/2 -mt-36 blur-2xl opacity-70 pointer-events-none -z-10","aria-hidden":"true"},[e("img",{src:D,class:"max-w-none",width:"1440",height:"450",alt:"Page Illustration"})],-1)),e("div",W,[e("div",O,[e("div",R,[e("div",F,[k(h,{class:"inline-flex",to:"/"},{default:N(()=>s[7]||(s[7]=[e("div",{class:"relative flex items-center justify-center w-16 h-16 border border-transparent rounded-2xl shadow-2xl [background:linear-gradient(var(--color-slate-900),var(--color-slate-900))_padding-box,conic-gradient(var(--color-slate-400),var(--color-slate-700)_25%,var(--color-slate-700)_75%,var(--color-slate-400)_100%)_border-box] before:absolute before:inset-0 before:bg-slate-800/30 before:rounded-2xl"},[e("img",{class:"relative",src:j,width:"42",height:"42",alt:"Stellar"})],-1)])),_:1})]),e("h1",G,r(a.$t("auth.createAccount")),1)]),e("div",J,[e("form",{onSubmit:H($,["prevent"])},[e("div",X,[e("div",null,[s[8]||(s[8]=e("label",{class:"block text-sm text-slate-300 font-medium mb-1",for:"nick-name"},[u("昵称 "),e("span",{class:"text-rose-500"},"*")],-1)),m(e("input",{id:"nick-name","onUpdate:modelValue":s[0]||(s[0]=l=>t.value.nickName=l),class:"form-input w-full",type:"text",placeholder:"请输入昵称（至少2个字符）",required:""},null,512),[[c,t.value.nickName]]),o.nickName?(i(),n("p",Y,r(o.nickName),1)):d("",!0)]),e("div",null,[s[9]||(s[9]=e("label",{class:"block text-sm text-slate-300 font-medium mb-1",for:"user-name"},[u("用户名 "),e("span",{class:"text-rose-500"},"*")],-1)),m(e("input",{id:"user-name","onUpdate:modelValue":s[1]||(s[1]=l=>t.value.userName=l),class:"form-input w-full",type:"text",placeholder:"请输入用户名（仅英文和数字，至少5个字符）",required:""},null,512),[[c,t.value.userName]]),o.userName?(i(),n("p",K,r(o.userName),1)):d("",!0)]),e("div",null,[s[10]||(s[10]=e("label",{class:"block text-sm text-slate-300 font-medium mb-1",for:"email"},[u("邮箱 "),e("span",{class:"text-rose-500"},"*")],-1)),m(e("input",{id:"email","onUpdate:modelValue":s[2]||(s[2]=l=>t.value.email=l),class:"form-input w-full",type:"email",placeholder:"example@company.com",required:""},null,512),[[c,t.value.email]]),o.email?(i(),n("p",Q,r(o.email),1)):d("",!0)]),e("div",null,[s[11]||(s[11]=e("label",{class:"block text-sm text-slate-300 font-medium mb-1",for:"phonenumber"},[u("手机号 "),e("span",{class:"text-rose-500"},"*")],-1)),m(e("input",{id:"phonenumber","onUpdate:modelValue":s[3]||(s[3]=l=>t.value.phonenumber=l),class:"form-input w-full",type:"tel",placeholder:"请输入手机号",onBlur:_,required:""},null,544),[[c,t.value.phonenumber]]),o.phonenumber?(i(),n("p",ee,r(o.phonenumber),1)):d("",!0)]),t.value.phonenumber&&w.value?(i(),n("div",se,[s[12]||(s[12]=e("label",{class:"block text-sm text-slate-300 font-medium mb-1",for:"smsCode"},[u("手机验证码 "),e("span",{class:"text-rose-500"},"*")],-1)),e("div",te,[m(e("input",{id:"smsCode","onUpdate:modelValue":s[4]||(s[4]=l=>t.value.smsCode=l),class:"form-input flex-1",type:"text",placeholder:"请输入验证码",required:""},null,512),[[c,t.value.smsCode]]),e("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-purple-500 hover:bg-purple-600 disabled:bg-gray-400 disabled:cursor-not-allowed rounded transition-colors",disabled:f.value||p.value>0||!w.value,onClick:V},[f.value?(i(),n("span",ae,"发送中...")):p.value>0?(i(),n("span",le,r(p.value)+"s",1)):(i(),n("span",re,"获取验证码"))],8,oe)]),o.smsCode?(i(),n("p",ne,r(o.smsCode),1)):d("",!0)])):d("",!0),e("div",null,[s[13]||(s[13]=e("label",{class:"block text-sm text-slate-300 font-medium mb-1",for:"password"},[u("密码 "),e("span",{class:"text-rose-500"},"*")],-1)),m(e("input",{id:"password","onUpdate:modelValue":s[5]||(s[5]=l=>t.value.password=l),class:"form-input w-full",type:"password",autocomplete:"on",placeholder:"至少6个字符，包含数字、大小写字母",required:""},null,512),[[c,t.value.password]]),o.password?(i(),n("p",ie,r(o.password),1)):d("",!0)]),e("div",null,[s[15]||(s[15]=e("label",{class:"block text-sm text-slate-300 font-medium mb-1",for:"gender"},[u("性别 "),e("span",{class:"text-rose-500"},"*")],-1)),m(e("select",{id:"gender","onUpdate:modelValue":s[6]||(s[6]=l=>t.value.sex=l),class:"form-select text-sm py-2 w-full",required:""},s[14]||(s[14]=[e("option",{value:""},"请选择",-1),e("option",{value:"男"},"男",-1),e("option",{value:"女"},"女",-1)]),512),[[L,t.value.sex]]),o.sex?(i(),n("p",ue,r(o.sex),1)):d("",!0)])]),e("div",de,[e("button",{type:"submit",class:"btn text-sm text-white bg-purple-500 hover:bg-purple-600 w-full shadow-xs group",disabled:x.value},[x.value?(i(),n("span",pe,r(a.$t("common.loading"))+"...",1)):(i(),n("span",ce,[u(r(a.$t("auth.signUp"))+" ",1),s[16]||(s[16]=e("span",{class:"tracking-normal text-purple-300 group-hover:translate-x-0.5 transition-transform duration-150 ease-in-out ml-1"},"->",-1))]))],8,me)])],32),e("div",ve,[e("div",be,[u(r(a.$t("auth.alreadyHaveAccount"))+" ",1),k(h,{class:"font-medium text-purple-500 hover:text-purple-400 transition duration-150 ease-in-out",to:"/signin"},{default:N(()=>[u(r(a.$t("auth.signIn")),1)]),_:1})])]),e("div",xe,[s[17]||(s[17]=e("div",{class:"border-t border-slate-800 grow mr-3","aria-hidden":"true"},null,-1)),e("div",fe,r(a.$t("common.or")),1),s[18]||(s[18]=e("div",{class:"border-t border-slate-800 grow ml-3","aria-hidden":"true"},null,-1))]),e("div",he,[e("button",ge,[e("span",we,[e("span",_e,r(a.$t("auth.continueWith"))+" Twitter",1),s[19]||(s[19]=e("svg",{class:"fill-current",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"12"},[e("path",{d:"m4.34 0 2.995 3.836L10.801 0h2.103L8.311 5.084 13.714 12H9.482L6.169 7.806 2.375 12H.271l4.915-5.436L0 0h4.34Zm-.635 1.155H2.457l7.607 9.627h1.165L3.705 1.155Z"})],-1))])]),e("button",ye,[e("span",ke,[e("span",Ne,r(a.$t("auth.continueWith"))+" GitHub",1),s[20]||(s[20]=e("svg",{class:"fill-current",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"15"},[e("path",{d:"M7.488 0C3.37 0 0 3.37 0 7.488c0 3.276 2.153 6.084 5.148 7.113.374.094.468-.187.468-.374v-1.31c-2.06.467-2.527-.936-2.527-.936-.375-.843-.843-1.124-.843-1.124-.655-.468.094-.468.094-.468.749.094 1.123.75 1.123.75.655 1.216 1.778.842 2.153.654.093-.468.28-.842.468-1.03-1.685-.186-3.37-.842-3.37-3.743 0-.843.281-1.498.75-1.966-.094-.187-.375-.936.093-1.965 0 0 .655-.187 2.059.749a6.035 6.035 0 0 1 1.872-.281c.655 0 1.31.093 1.872.28 1.404-.935 2.059-.748 2.059-.748.374 1.03.187 1.778.094 1.965.468.562.748 1.217.748 1.966 0 2.901-1.778 3.463-3.463 3.65.281.375.562.843.562 1.498v2.059c0 .187.093.468.561.374 2.996-1.03 5.148-3.837 5.148-7.113C14.976 3.37 11.606 0 7.488 0Z"})],-1))])])])])])])])])}}});export{Le as default};
